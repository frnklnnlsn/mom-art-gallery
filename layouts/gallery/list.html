<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ .Title }}</title>
  <style>
    /* Main gallery container */
    #gallery-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Image display row */
    #image-display {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }

    /* Main image container */
    #main-image-wrapper {
      flex: 3;
    }
    #main-image {
      max-width: 100%;
      max-height: 500px;
      border: 1px solid #eee;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    /* Info panel */
    #image-info {
      flex: 1;
      padding: 15px;
      background: #f8f8f8;
      border-radius: 6px;
    }
    #image-info h3 {
      margin-top: 0;
      border-bottom: 1px solid #ddd;
      padding-bottom: 8px;
    }
    .info-item {
      margin-bottom: 10px;
    }
    .info-label {
      font-weight: bold;
      display: inline-block;
      min-width: 80px;
    }

    /* Thumbnail strip */
    #thumbnail-strip {
      display: flex;
      gap: 8px;
      padding: 10px 0;
      overflow-x: auto;
      background: #f8f8f8;
      border-radius: 6px;
    }
    .thumbnail {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border: 2px solid transparent;
      border-radius: 3px;
      cursor: pointer;
      opacity: 0.7;
      transition: all 0.2s ease;
    }
    .thumbnail:hover {
      opacity: 0.9;
      border-color: #ccc;
    }
    .thumbnail.active {
      opacity: 1;
      border-color: #333;
      transform: scale(1.05);
    }

    /* Navigation controls */
    #controls {
      text-align: center;
      margin: 15px 0;
    }
    #controls button {
      padding: 8px 16px;
      margin: 0 5px;
      background: #333;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    #controls button:hover {
      background: #555;
    }
  </style>
</head>
<body>
  <div id="gallery-container">
    <h1>{{ .Title }}</h1>
    
    <div id="image-display">
      <div id="main-image-wrapper">
        <img id="main-image" src="" alt="Current artwork">
      </div>
      
      <div id="image-info">
        <h3>Image Details</h3>
        <div class="info-item">
          <span class="info-label">Number:</span>
          <span id="image-number">1</span>
        </div>
        <!-- Empty fields for future expansion -->
        <div class="info-item">
          <span class="info-label">Title:</span>
          <span id="image-title">(Coming soon)</span>
        </div>
        <div class="info-item">
          <span class="info-label">Date:</span>
          <span id="image-date">(Coming soon)</span>
        </div>
      </div>
    </div>
    
    <div id="thumbnail-strip"></div>
    
    <div id="controls">
      <button id="prev-btn">← Previous</button>
      <button id="next-btn">Next →</button>
    </div>
  </div>

  <script>
    // Gallery data - will later move to a proper data file
    const imageData = {
      "image1.jpg": { title: "Sunset", date: "2023-05-15" },
      "image2.jpg": { title: "Mountains", date: "2023-06-22" },
      "image3.jpg": { title: "Ocean", date: "2023-07-10" },
      "image4.jpg": { title: "Forest", date: "2023-08-05" },
      "image5.jpg": { title: "Cityscape", date: "2023-09-18" }
    };

    // Initialize gallery
    const images = {{ .Params.images | jsonify | safeJS }};
    let currentIndex = 0;
    const mainImage = document.getElementById('main-image');
    const thumbnailStrip = document.getElementById('thumbnail-strip');
    const imageNumberEl = document.getElementById('image-number');
    const imageTitleEl = document.getElementById('image-title');
    const imageDateEl = document.getElementById('image-date');
    
    // Set up gallery
    function initGallery() {
      if (!images || !Array.isArray(images)) {
        console.error('No images found');
        return;
      }
      
      updateDisplay();
      createThumbnails();
      setupEventListeners();
    }
    
    function updateDisplay() {
      const currentImage = images[currentIndex];
      mainImage.src = `/gallery/${currentImage}`;
      imageNumberEl.textContent = `${currentIndex + 1} of ${images.length}`;
      
      // Future: Update title and date from imageData
      if (imageData[currentImage]) {
        imageTitleEl.textContent = imageData[currentImage].title;
        imageDateEl.textContent = imageData[currentImage].date;
      }
    }
    
    function createThumbnails() {
      thumbnailStrip.innerHTML = '';
      
      images.forEach((image, index) => {
        const thumb = document.createElement('img');
        thumb.src = `/gallery/${image}`;
        thumb.className = 'thumbnail';
        thumb.alt = `Thumbnail ${index + 1}`;
        
        if (index === currentIndex) {
          thumb.classList.add('active');
        }
        
        thumb.addEventListener('click', () => {
          currentIndex = index;
          updateDisplay();
          updateActiveThumb();
        });
        
        thumbnailStrip.appendChild(thumb);
      });
    }
    
    function updateActiveThumb() {
      document.querySelectorAll('.thumbnail').forEach((thumb, index) => {
        thumb.classList.toggle('active', index === currentIndex);
      });
    }
    
    function setupEventListeners() {
      document.getElementById('prev-btn').addEventListener('click', () => {
        if (currentIndex > 0) {
          currentIndex--;
          updateDisplay();
          updateActiveThumb();
        }
      });
      
      document.getElementById('next-btn').addEventListener('click', () => {
        if (currentIndex < images.length - 1) {
          currentIndex++;
          updateDisplay();
          updateActiveThumb();
        }
      });
    }
    
    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', initGallery);
  </script>
</body>
</html>